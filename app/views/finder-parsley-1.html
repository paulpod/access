{% extends "responsive-layout.html" %}

{% block page_title %}
  NHS Service finder
{% endblock %}

{% block content %}





<main id="content" role="main" style="padding-bottom: 0">

<div class="grid-row">

    

    <div class="column-two-thirds">

      <div>

<!--      <h2 class="heading-medium">What?</h2>-->

      <div id="service-picker-box" class="picker-box" style="margin-top:3em">

        <label class="form-label" for="service-picker">

          <strong>Find a type of service</strong>
          
          <span class="picker-form-hint" style="display:inline-block;margin:0.4em 0">
          Example: Urgent Care Centre, Pharmacy
            
          </span>
        </label>

        <select id="service-picker">
        <option value="" selected="default"></option>
                  
        <option value="000">Acute Assessment unit</option>
        <option value="000">Ambulance Service</option>
        <option value="000">Care Home</option>
        <option value="000">Clinics</option>
        <option value="000">Community Based Services</option>
        <option value="000">Community Hospital</option>
        <option value="000">Dental Emergency</option>
        <option value="000">Dental Services</option>
        <option value="000">Distance Selling Pharmacy (DSP)</option>
        <option value="000">District/Community Nurse</option>
        <option value="000">Domiciliary Dentist</option>
        <option value="000">Domiciliary Optician</option>
        <option value="000">Emergency Care Practitioner (ECP)</option>
        <option value="000">Emergency Department</option>
        <option value="000">Eye Casualty</option>
        <option value="000">GP Choice</option>
        <option value="000">GP Extended Hours </option>
        <option value="000">GP in hours</option>
        <option value="000">GP-Led UCC with ED</option>
        <option value="000">GP Out of Hours Provider (OOH)</option>
        <option value="000">Health Information</option>
        <option value="000">Health Visitor</option>
        <option value="000">Hyper-Acute Stroke Unit (HASU)</option>
        <option value="000">Integrated Urgent Care (IUC)</option>
        <option value="000">Clinical Assessment Service (CAS)</option>
        <option value="000">Intermediate Care</option>
        <option value="000">Mental Health</option>
        <option value="000">Midwifery</option>
        <option value="000">Minor Eye Condition service (MECS)</option>
        <option value="000">Minor Injuries Unit (MIU)</option>
        <option value="000">Multi-Disciplinary Services</option>
        <option value="000">NHS111 Provider</option>
        <option value="000">Optician</option>
        <option value="000">Palliative Care</option>
        <option value="000">Pharmacist</option>
        <option value="000">Pharmacist Enhanced Service</option>
        <option value="000">Pharmacist - Extended Hours</option>
        <option value="000">Pharmacist Urgent Prescription</option>
        <option value="000">Primary Care Practitioner (PCP)</option>
        <option value="000">Primary Percutaneous Coronary Intervention (PPCI)</option>
        <option value="000">Safeguarding</option>
        <option value="000">Sexual Health</option>
        <option value="000">Single Point of Access (SPoA)</option>
        <option value="000">Social Care</option>
        <option value="000">Specialist Service</option>
        <option value="000">Speciality Emergency Department (Spec ED)</option>
        <option value="000">Therapist</option>
        <option value="000">Urgent Care Centre (UCC)</option>
        <option value="000">Voluntary agency</option>
        <option value="000">Walk In Centre (WIC)</option>

        </select>

        <script type="text/javascript">
      element = document.querySelector('#service-picker')
      accessibleAutocomplete.enhanceSelectElement({
        selectElement: element,
        displayMenu: 'overlay',
      })
        </script>

        <br clear="all">


      </div><!-- end picker box -->

    </div>






    <div id="when">

        <div style="float:left" id="radiocb">
          <fieldset class="" style="position: relative;top:-3px">

            <label for="time-radio-group"><strong>How urgently should the patient be seen?</strong></label>

            <br clear="all">


            <div class="multiple-choice">
              <input id="radio-1h" type="radio" name="time-radio-group" value="1h">
              <label for="radio-1h" >1 hour</label>
            </div>

            <div class="multiple-choice">
              <input id="radio-2h" type="radio" name="time-radio-group" value="2h">
              <label for="radio-2h" >2 hours</label>
            </div>

            <div class="multiple-choice">
              <input id="radio-6h" type="radio" name="time-radio-group" value="6h">
              <label for="radio-6h" >6 hours</label>
            </div>

            <div class="multiple-choice">
              <input id="radio-12h" type="radio" name="time-radio-group" value="12h">
              <label for="radio-12h" >12 hours</label>
            </div>

            <div class="multiple-choice">
              <input id="radio-24h" type="radio" name="time-radio-group" value="24h">
              <label for="radio-24h" >24 hours</label>
            </div>

          </fieldset>

          <br clear="all">

        </div>

      </div><!-- close WHEN area -->




<form id="demo-form" data-parsley-validate="">

      <div id="WHERE">

        <div style="float:left;margin-top:2em" id="radiocb">
          <fieldset class="" style="position: relative;top:-3px">

            <label for="distance-radio-group"><strong>Where should the patient be seen?</strong></label>

            <br clear="all">


            <div class="multiple-choice">
              <input id="radio-5m" type="radio" name="distance-radio-group" value="5m">

              <label for="radio-5m" >5 miles</label>
            </div>

            <div class="multiple-choice">
              <input id="radio-10m" type="radio" name="distance-radio-group" value="10m">
              <label for="radio-10m" >10 miles</label>
            </div>

            <div class="multiple-choice">
              <input id="radio-20m" type="radio" name="distance-radio-group" value="20m">
              <label for="radio-20m" >20 miles</label>
            </div>

            <div class="multiple-choice">
              <input id="radio-40m" type="radio" name="distance-radio-group" value="40m">
              <label for="radio-40m" >40 miles</label>
            </div>

            <div class="multiple-choice">
              <input id="radio-60m" type="radio" name="distance-radio-group" value="60m">
              <label for="radio-60m" >60 miles</label>
            </div>

          </fieldset>

          <br clear="all">

          <p>from <a href="locate">my current location</a> or <strong>postcode</strong> 

            <input class="form-control" name="age" type="text" id="postcode" size="12" maxlength="10" style="width:8em;padding:8px;margin-left:0.33em" data-parsley-trigger="input" required="">




            <form id="postcodeCheck" name="postcodeCheck" class="form form-horizontal">
      <div class="parsley-error-message alert alert-danger" id="parsley-error-message" style="display:none">
          <p>Your postcode could not be recognised. Please try again.</p>
      </div>

      <div class="form-group postcode_field">
        <label class="control-label col-sm-2 col-xs-3" for="PostCode"> Postcode</label>
        <div class="col-sm-10 col-xs-9">
          <input type="text" class="postcode_field form-control" name="PostCode" id="PostCode" value="" maxlength="8" onpaste="return false;" data-parsley-required="true" data-parsley-required-message="Please enter your postcode" data-parsley-postcode="true" data-parsley-postcode-message="Please enter a valid postcode" data-parsley-priority-enabled="true" data-parsley-trigger="change blur keypress">
        </div>
      </div>      
      <div class="form-group">
        <div class="col-xs-6 col-xs-offset-3 col-md-offset-3 col-md-6">
          <a id="btnFindAddress" class="btn btn-primary btn-block" name="btnFindAddress" href="javascript:void(0);">Sign in</a>
        </div>
      </div>
    </form>     



        </div>

      </div><!-- close WHERE area -->



      <div>
        <div class="form-group">

          <!--<a class="button" href="search-first" role="button">Continue</a>-->
          
          <input type="submit" class="btn btn-default button" value="Continue">
        
        </div>

        <!-- - - - - - <div>
          <a class="back-arrow" href="start">Previous step</a>
        </div> - - - - there is no previous step -->

        <br clear="all">

      </div>



</form>



    </div><!-- end column -->

  </div><!-- end grid row -->


<br clear="all">





    

    </div><!-- end column -->

    





    <div class="column-third">
      
      &nbsp;

    </div><!-- end column -->


	</div><!-- end a grid row -->


</main>




<script type="text/javascript">
  $(document).ready(function() {
    initParsleyValidators();
    
    $('#postcodeCheck').parsley();
    window.Parsley.on('form:error', function() {
        
       // This global callback will be called for any field that fails validation.
       $('#parsley-error-message').show();
      });
    window.Parsley.on('field:success', function() {
   
       // This global callback will be called when the form successfully validates
       $('#parsley-error-message').hide();
      });
    
    //
    
    $('#postcodeCheck .btn').on('click', function () {
  
          $('#postcodeCheck').parsley().validate();
        });   
  
  });
  function initParsleyValidators() {
    window.Parsley.addValidator('postcode', function(value, args) {
      return (isPostCode(value) !== false);
    }, 32);
  }
/* ----------------------------------------------------------------------------------------------------
Function: isPostCode
Parameters:    toCheck - postcode to be checked.
From: http://www.braemoor.co.uk/software/postcodes.shtml
This function checks the value of the parameter for a valid postcode format. The space between the
inward part and the outward part is optional, although is inserted if not there as it is part of the
official postcode.
If the postcode is found to be in a valid format, the function returns the postcode properly
formatted (in capitals with the outward code and the inward code separated by a space. If the
postcode is deemed to be incorrect a value of false is returned.
Example call:
  if (isPostCode (myPostCode)) {
    alert ("Postcode has a valid format")
  }
  else {alert ("Postcode has invalid format")};
--------------------------------------------------------------------------------------------------*/
function isPostCode(toCheck) {
 // Permitted letters depend upon their position in the postcode.
 var alpha1 = "[abcdefghijklmnoprstuwyz]"; // Character 1
 var alpha2 = "[abcdefghklmnopqrstuvwxy]"; // Character 2
 var alpha3 = "[abcdefghjkpmnrstuvwxy]"; // Character 3
 var alpha4 = "[abehmnprvwxy]"; // Character 4
 var alpha5 = "[abdefghjlnpqrstuwxyz]"; // Character 5
 var BFPOa5 = "[abdefghjlnpqrst]"; // BFPO alpha5
 var BFPOa6 = "[abdefghjlnpqrstuwzyz]"; // BFPO alpha6
 // Array holds the regular expressions for the valid postcodes
 var pcexp = new Array();
 // BFPO postcodes
 pcexp.push(new RegExp("^(bf1)(\\s*)([0-6]{1}" + BFPOa5 + "{1}" + BFPOa6 + "{1})$", "i"));
 // Expression for postcodes: AN NAA, ANN NAA, AAN NAA, and AANN NAA
 pcexp.push(new RegExp("^(" + alpha1 + "{1}" + alpha2 + "?[0-9]{1,2})(\\s*)([0-9]{1}" + alpha5 + "{2})$", "i"));
 // Expression for postcodes: ANA NAA
 pcexp.push(new RegExp("^(" + alpha1 + "{1}[0-9]{1}" + alpha3 + "{1})(\\s*)([0-9]{1}" + alpha5 + "{2})$", "i"));
 // Expression for postcodes: AANA  NAA
 pcexp.push(new RegExp("^(" + alpha1 + "{1}" + alpha2 + "{1}" + "?[0-9]{1}" + alpha4 + "{1})(\\s*)([0-9]{1}" + alpha5 + "{2})$", "i"));
 // Exception for the special postcode GIR 0AA
 pcexp.push(/^(GIR)(\s*)(0AA)$/i);
 // Standard BFPO numbers
 pcexp.push(/^(bfpo)(\s*)([0-9]{1,4})$/i);
 // c/o BFPO numbers
 pcexp.push(/^(bfpo)(\s*)(c\/o\s*[0-9]{1,3})$/i);
 // Overseas Territories
 pcexp.push(/^([A-Z]{4})(\s*)(1ZZ)$/i);
 // Anguilla
 pcexp.push(/^(ai-2640)$/i);
 // Load up the string to check
 var postCode = toCheck;
 // Assume we're not going to find a valid postcode
 var valid = false;
 // Check the string against the types of post codes
 for (var i = 0; i < pcexp.length; i++) {
  if (pcexp[i].test(postCode)) {
   // The post code is valid - split the post code into component parts
   pcexp[i].exec(postCode);
   // Copy it back into the original string, converting it to uppercase and inserting a space
   // between the inward and outward codes
   postCode = RegExp.$1.toUpperCase() + " " + RegExp.$3.toUpperCase();
   // If it is a BFPO c/o type postcode, tidy up the "c/o" part
   postCode = postCode.replace(/C\/O\s*/, "c/o ");
   // If it is the Anguilla overseas territory postcode, we need to treat it specially
   if (toCheck.toUpperCase() == 'AI-2640') {
    postCode = 'AI-2640'
   };
   // Load new postcode back into the form element
   valid = true;
   // Remember that we have found that the code is valid and break from loop
   break;
  }
 }
 // Return with either the reformatted valid postcode or the original invalid postcode
 if (valid) {
  return postCode;
 } else
 return false;
}
</script>



{% endblock %}


